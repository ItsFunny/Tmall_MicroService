<!DOCTYPE html>
<html>

<head>
    <!-- é¡µé¢meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>å•†å®¶ç®¡ç†</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="/plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="/css/style_other.css">
	<script src="/plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="/plugins/bootstrap/js/bootstrap.min.js"></script>
    
</head>
<script>
	function search()
	{
		document.pageForm.pageNum.value=1;
		document.pageForm.submit();
	}
	function showStoreDetail(storeId){
		$.ajax({
			    url:"/admin/api/v1/store/detail/"+storeId,    //è¯·æ±‚çš„urlåœ°å€
			    dataType:"json",   //è¿”å›æ ¼å¼ä¸ºjson
			    async:false,//è¯·æ±‚æ˜¯å¦å¼‚æ­¥ï¼Œé»˜è®¤ä¸ºå¼‚æ­¥ï¼Œè¿™ä¹Ÿæ˜¯ajaxé‡è¦ç‰¹æ€§
			    //ata:{"id":"value"},    //å‚æ•°å€¼
			    type:"GET",   //è¯·æ±‚æ–¹å¼
			    beforeSend:function(){
			        //è¯·æ±‚å‰çš„å¤„ç†
			    },
			    success:function(data){
			        //è¯·æ±‚æˆåŠŸæ—¶å¤„ç†
			         if(data.code==1){
			         	var store=data.data.store;
			         	$("#storeId").val(store.storeId);
			         	$("#status"+store.storeStatus).hide();
			      	 	var company=data.data.companyInfo;
			        	$("#companyName").html(company.companyName);
			        	$("#companyPhone").html(company.companyPhone);
			        	$("#companyMobilePhone").html(company.companyMobilePhone);
			        	$("#companyAddress").html(company.companyAddress);
			        	var user=data.data.userInfo;
			        }else{
			        	alert(data.msg);
			        }
			    },
			    complete:function(data){
			        //è¯·æ±‚å®Œæˆçš„å¤„ç†
			      	
			    },
			    error:function(){
			        //è¯·æ±‚å‡ºé”™å¤„ç†
			        alert("æœåŠ¡å™¨æ•…éšœ,è¯·ç¨åå†è¯•");
			        return;
			    }
		});
	}
	function updateStoreStatus(status){
		var storeId=$("#storeId").val();
		if(null==storeId || storeId<0){
			alert("åº—é“ºç¼–å·ä¸èƒ½ä¸ºç©º");
			return;
		}
		$.ajax({
			url: "/admin/api/v1/store/updateStatus/"+storeId,
			dataType: "json",
			async: false,
			type: "get",
			data: {"status":status},
		 	success:function(data){
		        //è¯·æ±‚æˆåŠŸæ—¶å¤„ç†
		        alert(data.msg);
		        location.reload();
		    },
	        error:function(){
		        //è¯·æ±‚å‡ºé”™å¤„ç†
		        alert("æœåŠ¡å™¨æ•…éšœ,è¯·ç¨åå†è¯•");
		        return;
		    }
		})
	}
</script>

<body class="hold-transition skin-red sidebar-mini"  >
  <!-- .box-body -->
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">å•†å®¶ç®¡ç†</h3>
                    </div>

                    <div class="box-body">

                        <!-- æ•°æ®è¡¨æ ¼ -->
                        <div class="table-box">

                            <!--å·¥å…·æ -->
                                       
			                 <form name="pageForm" method="get" action="/admin/store/all">
			                   <div class="box-tools pull-right">
                                <div class="has-feedback">
							        åº—é“ºåç§°ï¼š<input  type="text" name="storeName">
									åº—é“ºç¼©å†™åç§°ï¼š <input  type="text" name="storeAbbName">
									çŠ¶æ€ï¼š
									<select name="status" value="${status!""}">
										<#-- è¿™é‡Œæ”¹ç”¨jsæ˜¯æœ€ğŸ‘çš„,åˆæœ€ç®€æ´çš„ -->
										<#if status??>
										<#if status=="0">
										<option value="">å…¨éƒ¨</option>
										<option value="0" selected>å¾…å®¡æ ¸</option>
										<option value="1">å·²å®¡æ ¸</option>
										<option value="2">å®¡æ ¸æœªé€šè¿‡</option>
										<option value="3">å·²å…³é—­</option>
										<#elseif status=="1">
										<option value="">å…¨éƒ¨</option>
										<option value="0" >å¾…å®¡æ ¸</option>
										<option value="1" selected>å·²å®¡æ ¸</option>
										<option value="2">å®¡æ ¸æœªé€šè¿‡</option>
										<option value="3">å·²å…³é—­</option>
										<#elseif status=="2">
											<option value="">å…¨éƒ¨</option>
										<option value="0" >å¾…å®¡æ ¸</option>
										<option value="1">å·²å®¡æ ¸</option>
										<option value="2" selected>å®¡æ ¸æœªé€šè¿‡</option>
										<option value="3">å·²å…³é—­</option>
										<#elseif stsatus=="3">
										<option value="">å…¨éƒ¨</option>
										<option value="0" checked="checked">å¾…å®¡æ ¸</option>
										<option value="1">å·²å®¡æ ¸</option>
										<option value="2">å®¡æ ¸æœªé€šè¿‡</option>
										<option value="3" selected>å·²å…³é—­</option>
										<#else>
										<option value="" selected>å…¨éƒ¨</option>
										<option value="0" >å¾…å®¡æ ¸</option>
										<option value="1">å·²å®¡æ ¸</option>
										<option value="2">å®¡æ ¸æœªé€šè¿‡</option>
										<option value="3">å·²å…³é—­</option>
										</#if>
										<#else>
										<option value="" selected>å…¨éƒ¨</option>
										<option value="0" >å¾…å®¡æ ¸</option>
										<option value="1">å·²å®¡æ ¸</option>
										<option value="2">å®¡æ ¸æœªé€šè¿‡</option>
										<option value="3">å·²å…³é—­</option>
										</#if>
									</select>
									<input type="button" onclick="search()" value="æŸ¥è¯¢" class="btn btn-default" >                                 
                                </div>
                            </div>
				                 <input type="hidden" name="pageNum" value="${pageVO.pageNum!"1"}">
			                  </form>
                          
                            <!--å·¥å…·æ /-->

			                  <!--æ•°æ®åˆ—è¡¨-->
			                  <table id="dataList" class="table table-bordered table-striped table-hover dataTable">
			                      <thead>
			                          <tr>
			                              <th class="" style="padding-right:0px">
			                                  <input id="selall" type="checkbox" class="icheckbox_square-blue">
			                              </th> 
										  <th class="sorting_asc">å•†å®¶ID</th>
										  <th class="sorting">å…¬å¸åç§°</th> 
									      <th class="sorting">åº—é“ºåç§°</th>
									      <th class="sorting">åº—é“ºç¼©å†™</th>
									      <th class="sorting">è”ç³»äººå§“å</th>
									      <th class="sorting">å…¬å¸ç”µè¯</th>
									      <th class="sorting">çŠ¶æ€</th>										
					                      <th class="text-center">æ“ä½œ</th>
			                          </tr>
			                      </thead>
			                      <tbody>
			                      <#if pageVO.data??>
			                      	<#list pageVO.data as item>
			                      	<tr>
			                              <td><input  type="checkbox"></td>			                              
				                          <td>${item.storeId}</td>
				                          <td>${item.companyName}</td>
									      <td>${item.storeName}</td>
									      <td>${item.storeAbbName}</td>
									      <td>${item.storeContactName}</td>
									      <td>${item.storeContactPhone}</td>
		                                  <td>
		                                  <#if item.storeStatus==0>
			                                  <span>æœªå®¡æ ¸</span>	
			                              <#elseif item.storeStatus==1> 
			                              	  <span>å®¡æ ¸é€šè¿‡</span>
			                              <#elseif item.storeStatus==2>
			                              	  <span>å®¡æ ¸æœªé€šè¿‡</span>	
		                              	  <#elseif item.storeStatus==3>
		                              	  <span>å·²è¢«å…³é—­</span>
			                              </#if>
		                                  </td>
		                                  <td class="text-center">
		                                  <@shiro.hasPermission name="edit_store_show_detail">                                        
		                                 	  <button type="button" class="btn bg-olive btn-xs" data-toggle="modal" data-target="#sellerModal" onclick="showStoreDetail(${item.storeId})">è¯¦æƒ…</button>                                           
		                                 </@shiro.hasPermission>
		                                  </td>
			                          </tr>
			                          </#list>
			                      </#if>
			                      </tbody>
			                  </table>
			                 	 <#if (pageVO.totalCount>=1)>
			                 	 	æ€»å…±æœ‰${pageVO.totalCount}æ¡è®°å½• ${pageVO.pageNum}/${pageVO.maxPage}é¡µ 
				                 <#if pageVO.pageNum==1> <a href="javascript:void(0)">ç¬¬ä¸€é¡µ</a> <a href="javascript:void(0)">ä¸Šä¸€é¡µ</a></#if>
				                 <#if (pageVO.pageNum>1)> <a href="javascript:document.pageForm.pageNum.value=1;document.pageForm.submit();">ç¬¬ä¸€é¡µ</a> <a href="javascript:document.pageForm.pageNum.value=(${pageVO.pageNum}-1);document.pageForm.submit();">ä¸Šä¸€é¡µ</a> </#if>
				                 <#if pageVO.pageNum==pageVO.maxPage> <a href="javascript:void(0)">ä¸‹ä¸€é¡µ</a> <a href="javascript:void(0)">æœ€åä¸€é¡µ</a> </#if>
				                 <#if pageVO.pageNum<pageVO.maxPage>  <a href="javascript:document.pageForm.pageNum.value=(${pageVO.pageNum}+1);document.pageForm.submit();">ä¸‹ä¸€é¡µ</a> <a href="javascript:document.pageForm.pageNum.value=${pageVO.maxPage};document.pageForm.submit();">æœ€åä¸€é¡µ</a> </#if>
			                 	 <#else>
			                 	 	æ²¡æ‰¾åˆ°ä»»ä½•è®°å½•
			                 	 </#if>
			                  <!--æ•°æ®åˆ—è¡¨/-->                        
                        </div>
                        <!-- æ•°æ®è¡¨æ ¼ /-->
                     </div>
                    <!-- /.box-body -->
<!-- å•†å®¶è¯¦æƒ… -->
<div class="modal fade" id="sellerModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" >
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
			<h3 id="myModalLabel">å•†å®¶è¯¦æƒ…</h3>
		</div>
		<div class="modal-body">							
			
			 <ul class="nav nav-tabs">
			  <li class="active"><a href="#home" data-toggle="tab">åŸºæœ¬ä¿¡æ¯</a></li>
			  <li><a href="#linkman" data-toggle="tab">è”ç³»äºº</a></li>
			  <li><a href="#certificate" data-toggle="tab">è¯ä»¶</a></li>
			  <li><a href="#ceo" data-toggle="tab">æ³•å®šä»£è¡¨äºº</a></li>
			  <li><a href="#bank" data-toggle="tab">å¼€æˆ·è¡Œ</a></li>
			</ul>							
			
			<!-- é€‰é¡¹å¡å¼€å§‹ -->         
		    <div id="myTabContent" class="tab-content">
			    <div class="tab-pane active in" id="home">
			      <br>
			      <table class="table table-bordered table-striped"  width="800px">
			      	<tr>
			      		<td>å…¬å¸åç§°</td>
			      		<td id="companyName"></td>
			      	</tr>
			      	<tr>
			      		<td>å…¬å¸æ‰‹æœº</td>
			      		<td id="companyPhone"></td>
			      	</tr>
			      	<tr>
			      		<td>å…¬å¸ç”µè¯</td>
			      		<td id="companyMobilePhone"></td>
			      	</tr>
			      	<tr>
			      		<td>å…¬å¸è¯¦ç»†åœ°å€</td>
			      		<td id="companyAddress"></td>
			      	</tr>
			      </table>			      
      			</div>	
			    <div class="tab-pane fade" id="linkman">
			    	<br>
					<table class="table table-bordered table-striped" >
			      	<tr>
			      		<td>è”ç³»äººå§“å</td>
			      		<td>ç‹ç¾çª</td>
			      	</tr>
			      	<tr>
			      		<td>è”ç³»äººQQ</td>
			      		<td>78223322</td>
			      	</tr>
			      	<tr>
			      		<td>è”ç³»äººæ‰‹æœº</td>
			      		<td>13500223322</td>
			      	</tr>
			      	<tr>
			      		<td>è”ç³»äººE-Mail</td>
			      		<td>78223322@qq.com</td>
			      	</tr>
			      </table>
			    </div>
			    <div class="tab-pane fade" id="certificate">
					<br>
					<table class="table table-bordered table-striped" >
				      	<tr>
				      		<td>è¥ä¸šæ‰§ç…§å·</td>
				      		<td>330106000109206</td>
				      	</tr>
				      	<tr>
				      		<td>ç¨åŠ¡ç™»è®°è¯å·</td>
				      		<td>0292039393011</td>
				      	</tr>
				      	<tr>
				      		<td>ç»„ç»‡æœºæ„ä»£ç è¯å·</td>
				      		<td>22320320302421</td>
				      	</tr>				      	
			     	</table>
			    </div>
			    <div class="tab-pane fade" id="ceo">
					<br>
					<table class="table table-bordered table-striped" >
				      	<tr>
				      		<td>æ³•å®šä»£è¡¨äºº</td>
				      		<td>ç‹å°èª</td>
				      	</tr>
				      	<tr>
				      		<td>æ³•å®šä»£è¡¨äººèº«ä»½è¯å·</td>
				      		<td>211030198503223122</td>
				      	</tr>					   			      	
			     	</table>
			    </div>
			    <div class="tab-pane fade" id="bank">
					<br>
					<table class="table table-bordered table-striped" >
				      	<tr>
				      		<td>å¼€æˆ·è¡Œåç§°</td>
				      		<td>ä¸­å›½å»ºè®¾é“¶è¡ŒåŒ—äº¬å¸‚åˆ†è¡Œ</td>
				      	</tr>
				      	<tr>
				      		<td>å¼€æˆ·è¡Œæ”¯è¡Œ</td>
				      		<td>æµ·æ·€æ”¯è¡Œ</td>
				      	</tr>		
				      	<tr>
				      		<td>é“¶è¡Œè´¦å·</td>
				      		<td>999000111222</td>
				      	</tr>			   			      	
			     	</table>					
			    </div>
  			    </div> 			
           <!-- é€‰é¡¹å¡ç»“æŸ -->          
			
			
		</div>
		<#-- è¿™é‡Œéœ€è¦è¿›è¡Œåˆ¤æ–­,å°±æ˜¯è¯´å¦‚æœåŸå…ˆåº—é“ºæ˜¯å¤„äºå®¡æ ¸é€šè¿‡çŠ¶æ€,åˆ™å®¡æ ¸é€šè¿‡è¿™ä¸ªæŒ‰é’®ä¸ä¼šå‡ºç°, ç”¨äº†ä¸€ä¸ªæŠ•æœºå–å·§çš„æ–¹å¼,å†™æ­»idæ¥hide-->
		<div class="modal-footer" id="buttons">
			<input type="hidden" id="storeId" name="storeId">
			<@shiro.hasPermission name="edit_store_approve">
			<button class="btn btn-success" data-dismiss="modal" aria-hidden="true" id="status1" onclick="updateStoreStatus(1)">å®¡æ ¸é€šè¿‡</button>
			</@shiro.hasPermission>
			<@shiro.hasPermission name="edit_store_refuse">
         	<button class="btn btn-danger"  data-dismiss="modal" aria-hidden="true" id="status0" onclick="updateStoreStatus(2)">å®¡æ ¸ä¸é€šè¿‡</button>
         	</@shiro.hasPermission>
         	<@shiro.hasPermission name="edit_store_close">
            <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true" id="status2" onclick="updateStoreStatus(3) ">å…³é—­å•†å®¶</button>
             </@shiro.hasPermission>
			<button class="btn btn-default" data-dismiss="modal" aria-hidden="true">å…³é—­</button>
		</div>
	  </div>
	</div>
</div>


</body>

</html>